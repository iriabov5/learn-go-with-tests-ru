# Почему Go и почему TDD?

---

**← [Приветствие](01-welcome.md)** | **[Настройка окружения](03-setup.md) →**

---

## Почему Go?

### История и философия

Go (Golang) был создан в 2007 году в Google Робертом Гриземером, Робом Пайком и Кеном Томпсоном. Цель была простая: создать язык, который бы:

1. **Компилировался быстро** — для ускорения цикла разработки
2. **Выполнялся быстро** — для высокой производительности
3. **Был прост в изучении** — минималистичный синтаксис
4. **Поддерживал конкурентность** — из коробки, без сложных библиотек

### Ключевые преимущества

#### Простота

```go
package main

import "fmt"

func main() {
    fmt.Println("Hello, World!")
}
```

Всего 5 строк — и это полноценная программа. Нет лишнего синтаксиса, нет "магии".

#### Строгая типизация и безопасность

Go — статически типизированный язык с выводом типов. Это означает:

- Ошибки ловятся на этапе компиляции
- IDE может provide автодополнение и рефакторинг
- Код предсказуем и понятен

#### Встроенная конкурентность

```go
go func() {
    // этот код выполняется параллельно
}()
```

Горутины — это легковесные потоки, которые могут запускаться тысячами. Каналы обеспечивают безопасную коммуникацию между ними.

#### Богатая стандартная библиотека

Go поставляется с инструментами для:
- HTTP-серверов и клиентов
- JSON/XML обработки
- Работы с файлами
- Тестирования и бенчмаркинга
- Криптографии
- И многого другого

### Аналог в Java

| Характеристика | Go | Java |
|----------------|-----|------|
| **Парадигма** | Императивная, процедурная с ООП | Объектно-ориентированная |
| **Типизация** | Статическая с выводом типов | Статическая |
| **Компиляция** | В нативный код | В байткод JVM |
| **Конкурентность** | Горутины и каналы (встроено) | Thread, ExecutorService, CompletableFuture |
| **Синтаксис** | Минималистичный | Более многословный |
| **Наследование** | Композиция через интерфейсы | Наследование классов, интерфейсы |
| **Обработка ошибок** | Многозначные возвраты | Исключения |
| **Модель памяти** | Value types + pointers | Ссылочные типы (кроме примитивов) |

**Пример: HTTP-сервер**

Go:
```go
package main

import (
    "fmt"
    "net/http"
)

func handler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Hello, %s!", r.URL.Path[1:])
}

func main() {
    http.HandleFunc("/", handler)
    http.ListenAndServe(":8080", nil)
}
```

Java (Spring Boot):
```java
@RestController
@SpringBootApplication
public class Application {
    @GetMapping("/{name}")
    public String hello(@PathVariable String name) {
        return "Hello, " + name + "!";
    }

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

В Go HTTP-сервер — часть стандартной библиотеки. В Java требуется Spring Boot (или другой фреймворк).

## Почему Test-Driven Development?

### Что такое TDD?

Test-Driven Development — это методология разработки, где:

1. **Красный:** Пишем тест для новой функциональности
2. **Зелёный:** Пишем минимальный код, чтобы тест прошёл
3. **Рефакторинг:** Улучшаем код, сохраняя прохождение тестов

Этот цикл повторяется для каждой новой возможности.

### Преимущества TDD

#### 1. Меньше страха перед рефакторингом

Когда у вас есть хороший набор тестов, вы можете смело изменять код. Если что-то сломается — тесты сразу сообщат.

#### 2. Лучший дизайн кода

TDD заставляет думать о **интерфейсе** до реализации. Это приводит к:

- Модульному коду
- Низкой связности между компонентами
- Высокой связности внутри компонентов
- Тестируемому дизайну

#### 3. Живая документация

Тесты — это лучшие примеры использования кода:

```go
func TestAdd(t *testing.T) {
    result := Add(2, 3)
    expected := 5
    if result != expected {
        t.Errorf("Add(2, 3) = %d; want %d", result, expected)
    }
}
```

Из теста сразу видно: функция `Add` принимает два числа и возвращает их сумму.

#### 4. Быстрее отладка

Ошибки находятся на ранних этапах, когда контекст ещё свеж в памяти.

#### 5. Уверенность в коде

Вы знаете, что код работает, потому что это доказано тестами.

### TDD в Go

Go делает TDD особенно приятным:

1. **Встроенный фреймворк тестирования** — ничего не нужно устанавливать
2. **Простой синтаксис тестов** — минимум кода
3. **Быстрое выполнение тестов** — секунды, а не минуты
4. **Покрытие кода** — встроенный инструмент

### Аналог в Java

**Go:**
```go
package calculator

import "testing"

func TestAdd(t *testing.T) {
    got := Add(2, 3)
    want := 5
    if got != want {
        t.Errorf("Add(2, 3) = %d; want %d", got, want)
    }
}
```

**Java (JUnit 5):**
```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.assertEquals;

class CalculatorTest {
    @Test
    void add() {
        int result = Calculator.add(2, 3);
        assertEquals(5, result);
    }
}
```

### Общие принципы

| Принцип | Go | Java |
|---------|-----|------|
| **Фреймворк** | Встроенный `testing` | JUnit 5 (библиотека) |
| **Запуск тестов** | `go test` | Maven/Gradle или IDE |
| **Организация** | Файлы `*_test.go` рядом с кодом | Отдельная директория `src/test/java` |
| **Моки** | Интерфейсы, testify | Mockito, EasyMock |
| **Бенчмарки** | Встроенные `*_test.go` | JMH (отдельный инструмент) |

## Резюме

- **Go** — простой, быстрый и практичный язык с отличной поддержкой конкурентности
- **TDD** — методология, которая делает код качественнее, а разработку — увереннее
- **Вместе** — идеальная пара для обучения и практической разработки

В следующем разделе мы настроим окружение и напишем первый тест!

---

**← [Приветствие](01-welcome.md)** | **[Настройка окружения](03-setup.md) →**
